---
import SocialLinks from './ui/SocialLinks.astro';
---

<header class="fixed top-0 left-0 right-0 z-50 transition-all duration-500" id="header">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16 sm:h-20">
      <!-- Логотип — солнечная система -->
      <a href="#" class="flex items-center gap-2 group relative z-[60]">
        <svg class="w-8 h-8 sm:w-9 sm:h-9 text-peach-400" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="3.5" fill="currentColor"/>
          <line x1="16" y1="10.5" x2="16" y2="9" stroke="currentColor" stroke-width="0.8" stroke-linecap="round"/>
          <line x1="16" y1="21.5" x2="16" y2="23" stroke="currentColor" stroke-width="0.8" stroke-linecap="round"/>
          <line x1="10.5" y1="16" x2="9" y2="16" stroke="currentColor" stroke-width="0.8" stroke-linecap="round"/>
          <line x1="21.5" y1="16" x2="23" y2="16" stroke="currentColor" stroke-width="0.8" stroke-linecap="round"/>
          <line x1="12.1" y1="12.1" x2="11" y2="11" stroke="currentColor" stroke-width="0.7" stroke-linecap="round"/>
          <line x1="19.9" y1="12.1" x2="21" y2="11" stroke="currentColor" stroke-width="0.7" stroke-linecap="round"/>
          <line x1="12.1" y1="19.9" x2="11" y2="21" stroke="currentColor" stroke-width="0.7" stroke-linecap="round"/>
          <line x1="19.9" y1="19.9" x2="21" y2="21" stroke="currentColor" stroke-width="0.7" stroke-linecap="round"/>
          <circle cx="16" cy="16" r="6.5" stroke="currentColor" stroke-width="0.4" opacity="0.3"/>
          <circle cx="22.5" cy="16" r="1" fill="currentColor" opacity="0.7"/>
          <circle cx="16" cy="16" r="9" stroke="currentColor" stroke-width="0.4" opacity="0.25"/>
          <circle cx="16" cy="7" r="1.2" fill="currentColor" opacity="0.8"/>
          <circle cx="16" cy="16" r="12" stroke="currentColor" stroke-width="0.4" opacity="0.2"/>
          <circle cx="4" cy="16" r="1.5" fill="currentColor" opacity="0.9"/>
          <circle cx="5.8" cy="14.5" r="0.7" fill="currentColor" opacity="0.5"/>
        </svg>
        <span class="font-script text-lg sm:text-2xl text-dark-900 group-hover:text-peach-500 transition-colors">Юлия Плотникова</span>
      </a>

      <!-- Навигация (десктоп) -->
      <nav class="hidden md:flex items-center gap-8">
        <a href="#about" class="text-dark-500 hover:text-dark-900 transition-colors font-medium">О себе</a>
        <a href="#services" class="text-dark-500 hover:text-dark-900 transition-colors font-medium">Услуги</a>
        <a href="#reviews" class="text-dark-500 hover:text-dark-900 transition-colors font-medium">Отзывы</a>
        <a href="#faq" class="text-dark-500 hover:text-dark-900 transition-colors font-medium">FAQ</a>
        <a
          href="https://t.me/+79100051667"
          target="_blank"
          rel="noopener noreferrer"
          class="px-6 py-2.5 bg-gradient-to-r from-lavender-400 to-peach-400 text-white rounded-full font-semibold hover:shadow-lg hover:shadow-lavender-400/30 transition-all duration-300 shadow-md whitespace-nowrap hover:scale-[1.03]"
        >
          Записаться
        </a>
      </nav>

      <!-- Кнопка мобильного меню -->
      <button class="md:hidden relative z-[60] w-10 h-10 flex items-center justify-center text-dark-700" id="mobile-menu-btn" aria-label="Меню">
        <svg class="w-7 h-7 menu-open-icon transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" id="menu-open">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h12" />
        </svg>
        <svg class="w-7 h-7 menu-close-icon hidden transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" id="menu-close">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Мобильное меню — полноэкранное -->
  <div class="md:hidden fixed inset-0 z-[55] hidden" id="mobile-menu">
    <div class="absolute inset-0 bg-white">
      <!-- Декор -->
      <div class="absolute top-24 right-8 w-40 h-40 bg-lavender-100/30 rounded-full blur-3xl"></div>
      <div class="absolute bottom-32 left-8 w-32 h-32 bg-peach-50/40 rounded-full blur-3xl"></div>

      <nav class="flex flex-col items-center justify-center h-full gap-1 pb-20">
        <a href="#about" class="mobile-link py-4 px-8 text-2xl font-heading font-semibold text-dark-800 hover:text-peach-500 transition-colors">О себе</a>
        <a href="#services" class="mobile-link py-4 px-8 text-2xl font-heading font-semibold text-dark-800 hover:text-peach-500 transition-colors">Услуги</a>
        <a href="#reviews" class="mobile-link py-4 px-8 text-2xl font-heading font-semibold text-dark-800 hover:text-peach-500 transition-colors">Отзывы</a>
        <a href="#faq" class="mobile-link py-4 px-8 text-2xl font-heading font-semibold text-dark-800 hover:text-peach-500 transition-colors">FAQ</a>
        <a
          href="https://t.me/+79100051667"
          target="_blank"
          rel="noopener noreferrer"
          class="mobile-link mt-6 px-10 py-4 bg-gradient-to-r from-lavender-400 to-peach-400 text-white rounded-full font-semibold text-lg hover:shadow-xl hover:shadow-lavender-400/30 transition-all shadow-lg"
        >
          Записаться
        </a>
        <div class="mt-8">
          <SocialLinks size="md" />
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  const header = document.getElementById('header');

  function updateHeader() {
    if (!header) return;
    if (window.scrollY > 80) {
      header.classList.add('bg-white/90', 'backdrop-blur-md', 'shadow-sm');
    } else {
      header.classList.remove('bg-white/90', 'backdrop-blur-md', 'shadow-sm');
    }
  }
  window.addEventListener('scroll', updateHeader, { passive: true });
  updateHeader();

  // Мобильное меню
  const mobileBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOpen = document.getElementById('menu-open');
  const menuClose = document.getElementById('menu-close');
  let isOpen = false;

  function toggleMenu() {
    isOpen = !isOpen;
    if (isOpen) {
      mobileMenu?.classList.remove('hidden');
      menuOpen?.classList.add('hidden');
      menuClose?.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenu?.classList.add('hidden');
      menuOpen?.classList.remove('hidden');
      menuClose?.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  mobileBtn?.addEventListener('click', toggleMenu);

  document.querySelectorAll('.mobile-link').forEach(link => {
    link.addEventListener('click', () => {
      if (isOpen) toggleMenu();
    });
  });
</script>
